<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="736px" preserveAspectRatio="none" style="width:532px;height:736px;" version="1.1" viewBox="0 0 532 736" width="532px" zoomAndPan="magnify"><defs><style type="text/css"><![CDATA[*.f_dddddd_222222 {fill:#dddddd;}*.s_181818_e7e7e7 {stroke:#181818;}*.f_000000_ffffff {fill:#000000;}*.f_ffffff_000000 {fill:#ffffff;}*.s_000000_ffffff {stroke:#000000;}*.f_181818_e7e7e7 {fill:#181818;}*.f_eeeeee_555555 {fill:#eeeeee;}*.f_feffdd_333333 {fill:#feffdd;}@media (prefers-color-scheme:dark) {*.f_dddddd_222222 {fill:#222222;}*.s_181818_e7e7e7 {stroke:#e7e7e7;}*.f_000000_ffffff {fill:#ffffff;}*.f_ffffff_000000 {fill:#000000;}*.s_000000_ffffff {stroke:#ffffff;}*.f_181818_e7e7e7 {fill:#e7e7e7;}*.f_eeeeee_555555 {fill:#555555;}*.f_feffdd_333333 {fill:#333333;}}]]></style></defs><g><rect class="f_dddddd_222222 s_181818_e7e7e7" height="724.8594" style="stroke-width:0.5;" width="220" x="137" y="6"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="71" x="211.5" y="18.0669">Orb Node</text><rect class="f_ffffff_000000 s_181818_e7e7e7" height="529.1328" style="stroke-width:1.0;" width="10" x="166.5" y="112.4297"/><rect class="f_ffffff_000000 s_181818_e7e7e7" height="60.8984" style="stroke-width:1.0;" width="10" x="171.5" y="558.6641"/><rect class="s_000000_ffffff" height="449.8672" style="stroke-width:1.5;fill:none;" width="515.5" x="10" y="184.6953"/><rect class="s_000000_ffffff" height="259.2656" style="stroke-width:1.5;fill:none;" width="495.5" x="20" y="368.2969"/><line class="s_181818_e7e7e7" style="stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="54" x2="54" y1="81.2969" y2="651.5625"/><line class="s_181818_e7e7e7" style="stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="171" x2="171" y1="81.2969" y2="651.5625"/><line class="s_181818_e7e7e7" style="stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="318" x2="318" y1="81.2969" y2="651.5625"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="30" y="77.9951">Client</text><ellipse class="s_181818_e7e7e7" cx="54.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke-width:0.5;"/><path class="s_181818_e7e7e7" d="M54.5,21.5 L54.5,48.5 M41.5,29.5 L67.5,29.5 M54.5,48.5 L41.5,63.5 M54.5,48.5 L67.5,63.5 " fill="none" style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="30" y="663.5576">Client</text><ellipse class="s_181818_e7e7e7" cx="54.5" cy="675.3594" fill="#E2E2F0" rx="8" ry="8" style="stroke-width:0.5;"/><path class="s_181818_e7e7e7" d="M54.5,683.3594 L54.5,710.3594 M41.5,691.3594 L67.5,691.3594 M54.5,710.3594 L41.5,725.3594 M54.5,710.3594 L67.5,725.3594 " fill="none" style="stroke-width:0.5;"/><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="61" x="141" y="33.7031"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="153" y="53.6982">HTTP</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="148" y="69.9951">Server</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="61" x="141" y="650.5625"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="153" y="670.5576">HTTP</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="148" y="686.8545">Server</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="69" x="284" y="33.7031"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="300" y="53.6982">REST</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="291" y="69.9951">Handler</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="69" x="284" y="650.5625"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="300" y="670.5576">REST</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="291" y="686.8545">Handler</text><rect class="f_ffffff_000000 s_181818_e7e7e7" height="529.1328" style="stroke-width:1.0;" width="10" x="166.5" y="112.4297"/><rect class="f_ffffff_000000 s_181818_e7e7e7" height="60.8984" style="stroke-width:1.0;" width="10" x="171.5" y="558.6641"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="154.5,108.4297,164.5,112.4297,154.5,116.4297,158.5,112.4297" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="54.5" x2="160.5" y1="112.4297" y2="112.4297"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="61.5" y="107.3638">POST(request)</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="176.5" x2="218.5" y1="156.6953" y2="156.6953"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="218.5" x2="218.5" y1="156.6953" y2="169.6953"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="177.5" x2="218.5" y1="169.6953" y2="169.6953"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="187.5,165.6953,177.5,169.6953,187.5,173.6953,183.5,169.6953" style="stroke-width:1.0;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="183.5" y="136.4966">Get defined</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="183.5" y="151.6294">token(s)</text><path class="f_eeeeee_555555 s_000000_ffffff" d="M10,184.6953 L76,184.6953 L76,191.8281 L66,201.8281 L10,201.8281 L10,184.6953 " style="stroke-width:1.5;"/><rect class="s_000000_ffffff" fill="none" height="449.8672" style="stroke-width:1.5;" width="515.5" x="10" y="184.6953"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="25" y="197.7622">alt</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="139" x="91" y="196.9058">[Token not required]</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="306.5,218.9609,316.5,222.9609,306.5,226.9609,310.5,222.9609" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="176.5" x2="312.5" y1="222.9609" y2="222.9609"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="183.5" y="217.895">Handle(request)</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="187.5,248.0938,177.5,252.0938,187.5,256.0938,183.5,252.0938" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="181.5" x2="317.5" y1="252.0938" y2="252.0938"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="193.5" y="247.0278">response</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="65.5,277.2266,55.5,281.2266,65.5,285.2266,61.5,281.2266" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="59.5" x2="165.5" y1="281.2266" y2="281.2266"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="71.5" y="276.1606">response</text><line class="s_000000_ffffff" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="525.5" y1="290.2266" y2="290.2266"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="111" x="15" y="300.437">[Token required]</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="176.5" x2="218.5" y1="340.2969" y2="340.2969"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="218.5" x2="218.5" y1="340.2969" y2="353.2969"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="177.5" x2="218.5" y1="353.2969" y2="353.2969"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="187.5,349.2969,177.5,353.2969,187.5,357.2969,183.5,353.2969" style="stroke-width:1.0;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="183.5" y="320.0981">check bearer token</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="183.5" y="335.231">in request header</text><path class="f_eeeeee_555555 s_000000_ffffff" d="M20,368.2969 L86,368.2969 L86,375.4297 L76,385.4297 L20,385.4297 L20,368.2969 " style="stroke-width:1.5;"/><rect class="s_000000_ffffff" fill="none" height="259.2656" style="stroke-width:1.5;" width="495.5" x="20" y="368.2969"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="35" y="381.3638">alt</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="66" x="101" y="380.5073">[Matches]</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="306.5,402.5625,316.5,406.5625,306.5,410.5625,310.5,406.5625" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="176.5" x2="312.5" y1="406.5625" y2="406.5625"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="183.5" y="401.4966">Handle(request)</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="187.5,431.6953,177.5,435.6953,187.5,439.6953,183.5,435.6953" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="181.5" x2="317.5" y1="435.6953" y2="435.6953"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="193.5" y="430.6294">response</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="65.5,460.8281,55.5,464.8281,65.5,468.8281,61.5,464.8281" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="59.5" x2="165.5" y1="464.8281" y2="464.8281"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="71.5" y="459.7622">response</text><line class="s_000000_ffffff" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="515.5" y1="473.8281" y2="473.8281"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="117" x="25" y="484.0386">[Does not match]</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="176.5" x2="223.5" y1="545.6641" y2="545.6641"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="223.5" x2="223.5" y1="545.6641" y2="558.6641"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="182.5" x2="223.5" y1="558.6641" y2="558.6641"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="192.5,554.6641,182.5,558.6641,192.5,562.6641,188.5,558.6641" style="stroke-width:1.0;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="188.5" y="525.4653">Authorize with</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="188.5" y="540.5981">HTTP Signature</text><path class="f_feffdd_333333 s_181818_e7e7e7" d="M298,492.6328 L298,592.6328 L495,592.6328 L495,502.6328 L485,492.6328 L298,492.6328 " style="stroke-width:0.5;"/><path class="f_feffdd_333333 s_181818_e7e7e7" d="M485,492.6328 L485,502.6328 L495,502.6328 L485,492.6328 " style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="304" y="509.6997">No token was provided</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="304" y="524.8325">or the token did not</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="304" y="539.9653">match the expected value.</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="304" y="555.0981">Perform authentication and</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="304" y="570.231">authorization with HTTP</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="304" y="585.3638">signatures.</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="65.5,615.5625,55.5,619.5625,65.5,623.5625,61.5,619.5625" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="59.5" x2="165.5" y1="619.5625" y2="619.5625"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="71.5" y="614.4966">response</text><!--MD5=[bf0cbdccb40fb47f359938a31d24b70d]
@startuml
'https://plantuml.com/sequence-diagram


actor Client as client

box Orb Node
participant "HTTP\nServer" as server
participant "REST\nHandler" as handler
end box

client -> server: POST(request)

activate server

server -> server: Get defined\ntoken(s)

alt Token not required
    server -> handler: Handle(request)
    handler - -> server: response
    server - -> client: response
else Token required
  server -> server: check bearer token\nin request header

  alt Matches
    server -> handler: Handle(request)
    handler - -> server: response
    server - -> client: response
  else Does not match
    server -> server: Authorize with\nHTTP Signature
    activate server

    note right
     No token was provided
     or the token did not
     match the expected value.
     Perform authentication and
     authorization with HTTP
     signatures.
    end note
    server - -> client: response
    deactivate server
  end alt
end alt

deactivate server
@enduml

@startuml


actor Client as client

box Orb Node
participant "HTTP\nServer" as server
participant "REST\nHandler" as handler
end box

client -> server: POST(request)

activate server

server -> server: Get defined\ntoken(s)

alt Token not required
    server -> handler: Handle(request)
    handler - -> server: response
    server - -> client: response
else Token required
  server -> server: check bearer token\nin request header

  alt Matches
    server -> handler: Handle(request)
    handler - -> server: response
    server - -> client: response
  else Does not match
    server -> server: Authorize with\nHTTP Signature
    activate server

    note right
     No token was provided
     or the token did not
     match the expected value.
     Perform authentication and
     authorization with HTTP
     signatures.
    end note
    server - -> client: response
    deactivate server
  end alt
end alt

deactivate server
@enduml

PlantUML version 1.2022.2beta5(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>