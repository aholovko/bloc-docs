<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1073px" preserveAspectRatio="none" style="width:957px;height:1073px;background:#FFFFFF;" version="1.1" viewBox="0 0 957 1073" width="957px" zoomAndPan="magnify"><defs><filter height="300%" id="f1a1d0lnml9sde" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" height="1061.6406" style="stroke:#A80036;stroke-width:1.0;" width="293" x="183" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="66" x="294" y="18.0669">Domain1</text><rect fill="#DDDDDD" height="1061.6406" style="stroke:#A80036;stroke-width:1.0;" width="235" x="478" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="66" x="562.5" y="18.0669">Domain2</text><rect fill="#FFFFFF" height="1061.6406" style="stroke:#A80036;stroke-width:1.0;" width="236" x="715" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="65" x="798" y="18.0669">Domain3</text><rect fill="#FFFFFF" filter="url(#f1a1d0lnml9sde)" height="322.7266" style="stroke:#A80036;stroke-width:1.0;" width="10" x="223" y="70.4297"/><rect fill="#FFFFFF" filter="url(#f1a1d0lnml9sde)" height="157.8633" style="stroke:#A80036;stroke-width:1.0;" width="10" x="223" y="480.5547"/><rect fill="#FFFFFF" filter="url(#f1a1d0lnml9sde)" height="215.1953" style="stroke:#A80036;stroke-width:1.0;" width="10" x="223" y="796.1484"/><rect fill="#FFFFFF" filter="url(#f1a1d0lnml9sde)" height="490.5234" style="stroke:#A80036;stroke-width:1.0;" width="10" x="517.5" y="91.5625"/><rect fill="#FFFFFF" filter="url(#f1a1d0lnml9sde)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="676.5" y="422.2891"/><rect fill="#FFFFFF" filter="url(#f1a1d0lnml9sde)" height="533.6563" style="stroke:#A80036;stroke-width:1.0;" width="10" x="755" y="291.625"/><rect fill="#FFFFFF" filter="url(#f1a1d0lnml9sde)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="914" y="737.8828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="228" x2="228" y1="60.4297" y2="1029.3438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="413" x2="413" y1="60.4297" y2="1029.3438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="522" x2="522" y1="60.4297" y2="1029.3438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="681" x2="681" y1="60.4297" y2="1029.3438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="760" x2="760" y1="60.4297" y2="1029.3438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="919" x2="919" y1="60.4297" y2="1029.3438"/><rect fill="#FEFECE" filter="url(#f1a1d0lnml9sde)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="78" x="187" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="194" y="45.1279">Domain1</text><rect fill="#FEFECE" filter="url(#f1a1d0lnml9sde)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="78" x="187" y="1028.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="194" y="1048.3389">Domain1</text><path d="M359,34.1328 L467,34.1328 C472,34.1328 472,47.2813 472,47.2813 C472,47.2813 472,60.4297 467,60.4297 L359,60.4297 C354,60.4297 354,47.2813 354,47.2813 C354,47.2813 354,34.1328 359,34.1328 " fill="#FEFECE" filter="url(#f1a1d0lnml9sde)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M467,34.1328 C462,34.1328 462,47.2813 462,47.2813 C462,60.4297 467,60.4297 467,60.4297 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="359" y="52.1279">anchor_event</text><path d="M359,1028.3438 L467,1028.3438 C472,1028.3438 472,1041.4922 472,1041.4922 C472,1041.4922 472,1054.6406 467,1054.6406 L359,1054.6406 C354,1054.6406 354,1041.4922 354,1041.4922 C354,1041.4922 354,1028.3438 359,1028.3438 " fill="#FEFECE" filter="url(#f1a1d0lnml9sde)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M467,1028.3438 C462,1028.3438 462,1041.4922 462,1041.4922 C462,1054.6406 467,1054.6406 467,1054.6406 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="359" y="1046.3389">anchor_event</text><rect fill="#FEFECE" filter="url(#f1a1d0lnml9sde)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="77" x="482" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="489" y="45.1279">Domain2</text><rect fill="#FEFECE" filter="url(#f1a1d0lnml9sde)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="77" x="482" y="1028.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="489" y="1048.3389">Domain2</text><rect fill="#FEFECE" filter="url(#f1a1d0lnml9sde)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="51" x="654" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="661" y="45.1279">VCT2</text><rect fill="#FEFECE" filter="url(#f1a1d0lnml9sde)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="51" x="654" y="1028.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="661" y="1048.3389">VCT2</text><rect fill="#FEFECE" filter="url(#f1a1d0lnml9sde)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="78" x="719" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="726" y="45.1279">Domain3</text><rect fill="#FEFECE" filter="url(#f1a1d0lnml9sde)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="78" x="719" y="1028.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="726" y="1048.3389">Domain3</text><rect fill="#FEFECE" filter="url(#f1a1d0lnml9sde)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="52" x="891" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="898" y="45.1279">VCT3</text><rect fill="#FEFECE" filter="url(#f1a1d0lnml9sde)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="52" x="891" y="1028.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="898" y="1048.3389">VCT3</text><rect fill="#FFFFFF" filter="url(#f1a1d0lnml9sde)" height="322.7266" style="stroke:#A80036;stroke-width:1.0;" width="10" x="223" y="70.4297"/><rect fill="#FFFFFF" filter="url(#f1a1d0lnml9sde)" height="157.8633" style="stroke:#A80036;stroke-width:1.0;" width="10" x="223" y="480.5547"/><rect fill="#FFFFFF" filter="url(#f1a1d0lnml9sde)" height="215.1953" style="stroke:#A80036;stroke-width:1.0;" width="10" x="223" y="796.1484"/><rect fill="#FFFFFF" filter="url(#f1a1d0lnml9sde)" height="490.5234" style="stroke:#A80036;stroke-width:1.0;" width="10" x="517.5" y="91.5625"/><rect fill="#FFFFFF" filter="url(#f1a1d0lnml9sde)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="676.5" y="422.2891"/><rect fill="#FFFFFF" filter="url(#f1a1d0lnml9sde)" height="533.6563" style="stroke:#A80036;stroke-width:1.0;" width="10" x="755" y="291.625"/><rect fill="#FFFFFF" filter="url(#f1a1d0lnml9sde)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="914" y="737.8828"/><polygon fill="#A80036" points="505.5,87.5625,515.5,91.5625,505.5,95.5625,509.5,91.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="233" x2="511.5" y1="91.5625" y2="91.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="240" y="86.4966">Offer activity</text><line style="stroke:#A80036;stroke-width:1.0;" x1="527.5" x2="569.5" y1="150.9609" y2="150.9609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="569.5" x2="569.5" y1="150.9609" y2="163.9609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="528.5" x2="569.5" y1="163.9609" y2="163.9609"/><polygon fill="#A80036" points="538.5,159.9609,528.5,163.9609,538.5,167.9609,534.5,163.9609" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="534.5" y="115.6294">Authenticate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="534.5" y="130.7622">Domain1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="534.5" y="145.895">using HTTP signature</text><polygon fill="#A80036" points="244,189.0938,234,193.0938,244,197.0938,240,193.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="238" x2="516.5" y1="193.0938" y2="193.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="250" y="188.0278">OK</text><line style="stroke:#A80036;stroke-width:1.0;" x1="527.5" x2="569.5" y1="243.4258" y2="243.4258"/><line style="stroke:#A80036;stroke-width:1.0;" x1="569.5" x2="569.5" y1="243.4258" y2="256.4258"/><line style="stroke:#A80036;stroke-width:1.0;" x1="528.5" x2="569.5" y1="256.4258" y2="256.4258"/><polygon fill="#A80036" points="538.5,252.4258,528.5,256.4258,538.5,260.4258,534.5,256.4258" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="534.5" y="223.2271">Authorize</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="534.5" y="238.3599">Domain1</text><path d="M331,206.0938 L331,261.0938 L508,261.0938 L508,216.0938 L498,206.0938 L331,206.0938 " fill="#FBFB77" filter="url(#f1a1d0lnml9sde)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M498,206.0938 L498,216.0938 L508,216.0938 L498,206.0938 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="337" y="223.1606">Authorization successful</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="337" y="238.2935">since Domain1 is in the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="337" y="253.4263">witnessing list.</text><polygon fill="#A80036" points="743,287.625,753,291.625,743,295.625,747,291.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="233" x2="749" y1="291.625" y2="291.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="240" y="286.5591">Offer activity</text><line style="stroke:#A80036;stroke-width:1.0;" x1="765" x2="807" y1="351.0234" y2="351.0234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="807" x2="807" y1="351.0234" y2="364.0234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="766" x2="807" y1="364.0234" y2="364.0234"/><polygon fill="#A80036" points="776,360.0234,766,364.0234,776,368.0234,772,364.0234" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="772" y="315.6919">Authenticate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="772" y="330.8247">Domain1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="772" y="345.9575">using HTTP signature</text><polygon fill="#A80036" points="239,389.1563,229,393.1563,239,397.1563,235,393.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="233" x2="754" y1="393.1563" y2="393.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="245" y="388.0903">OK</text><polygon fill="#A80036" points="664.5,418.2891,674.5,422.2891,664.5,426.2891,668.5,422.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="527.5" x2="670.5" y1="422.2891" y2="422.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="534.5" y="417.2231">Add VCT</text><polygon fill="#A80036" points="538.5,447.4219,528.5,451.4219,538.5,455.4219,534.5,451.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="532.5" x2="680.5" y1="451.4219" y2="451.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="544.5" y="446.356">OK</text><polygon fill="#A80036" points="244,476.5547,234,480.5547,244,484.5547,240,480.5547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="238" x2="516.5" y1="480.5547" y2="480.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="250" y="475.4888">Accept activity</text><line style="stroke:#A80036;stroke-width:1.0;" x1="233" x2="275" y1="539.9531" y2="539.9531"/><line style="stroke:#A80036;stroke-width:1.0;" x1="275" x2="275" y1="539.9531" y2="552.9531"/><line style="stroke:#A80036;stroke-width:1.0;" x1="234" x2="275" y1="552.9531" y2="552.9531"/><polygon fill="#A80036" points="244,548.9531,234,552.9531,244,556.9531,240,552.9531" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="240" y="504.6216">Authenticate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="240" y="519.7544">Domain2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="240" y="534.8872">using HTTP signature</text><polygon fill="#A80036" points="510.5,578.0859,520.5,582.0859,510.5,586.0859,514.5,582.0859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="233" x2="516.5" y1="582.0859" y2="582.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="240" y="577.02">OK</text><line style="stroke:#A80036;stroke-width:1.0;" x1="233" x2="275" y1="637.418" y2="637.418"/><line style="stroke:#A80036;stroke-width:1.0;" x1="275" x2="275" y1="637.418" y2="650.418"/><line style="stroke:#A80036;stroke-width:1.0;" x1="228" x2="275" y1="650.418" y2="650.418"/><polygon fill="#A80036" points="238,646.418,228,650.418,238,654.418,234,650.418" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="240" y="617.2192">Add proof from Domain3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="240" y="632.3521">and check Witness Policy</text><path d="M48,595.0859 L48,650.0859 L214,650.0859 L214,605.0859 L204,595.0859 L48,595.0859 " fill="#FBFB77" filter="url(#f1a1d0lnml9sde)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M204,595.0859 L204,605.0859 L214,605.0859 L204,595.0859 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="54" y="612.1528">We don't have enough</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="54" y="627.2856">proofs (according to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="54" y="642.4185">Witness Policy).</text><line style="stroke:#A80036;stroke-width:1.0;" x1="765" x2="807" y1="695.75" y2="695.75"/><line style="stroke:#A80036;stroke-width:1.0;" x1="807" x2="807" y1="695.75" y2="708.75"/><line style="stroke:#A80036;stroke-width:1.0;" x1="766" x2="807" y1="708.75" y2="708.75"/><polygon fill="#A80036" points="776,704.75,766,708.75,776,712.75,772,708.75" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="772" y="675.5513">Authorize</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="772" y="690.6841">Domain1</text><path d="M515,665.9844 L515,705.9844 L746,705.9844 L746,675.9844 L736,665.9844 L515,665.9844 " fill="#FBFB77" filter="url(#f1a1d0lnml9sde)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M736,665.9844 L736,675.9844 L746,675.9844 L736,665.9844 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="521" y="683.0513">Authorization successful since</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="521" y="698.1841">Domain1 is in the witnessing list.</text><polygon fill="#A80036" points="902,733.8828,912,737.8828,902,741.8828,906,737.8828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="765" x2="908" y1="737.8828" y2="737.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="772" y="732.8169">Add to VCT</text><polygon fill="#A80036" points="776,763.0156,766,767.0156,776,771.0156,772,767.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="770" x2="918" y1="767.0156" y2="767.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="782" y="761.9497">OK</text><polygon fill="#A80036" points="244,792.1484,234,796.1484,244,800.1484,240,796.1484" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="238" x2="754" y1="796.1484" y2="796.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="250" y="791.0825">Accept activity</text><polygon fill="#A80036" points="748,821.2813,758,825.2813,748,829.2813,752,825.2813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="233" x2="754" y1="825.2813" y2="825.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="240" y="820.2153">OK</text><line style="stroke:#A80036;stroke-width:1.0;" x1="233" x2="275" y1="869.5469" y2="869.5469"/><line style="stroke:#A80036;stroke-width:1.0;" x1="275" x2="275" y1="869.5469" y2="882.5469"/><line style="stroke:#A80036;stroke-width:1.0;" x1="234" x2="275" y1="882.5469" y2="882.5469"/><polygon fill="#A80036" points="244,878.5469,234,882.5469,244,886.5469,240,882.5469" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="240" y="849.3481">Add proof from Domain3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="240" y="864.481">and check Witness Policy</text><path d="M31,839.7813 L31,879.7813 L214,879.7813 L214,849.7813 L204,839.7813 L31,839.7813 " fill="#FBFB77" filter="url(#f1a1d0lnml9sde)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M204,839.7813 L204,849.7813 L214,849.7813 L204,839.7813 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="37" y="856.8481">We have enough proofs</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="37" y="871.981">according Witness Policy.</text><polygon fill="#A80036" points="401,942.9453,411,946.9453,401,950.9453,405,946.9453" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="233" x2="407" y1="946.9453" y2="946.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="240" y="941.8794">AnchorEvent message</text><path d="M5,895.5469 L5,980.5469 L214,980.5469 L214,905.5469 L204,895.5469 L5,895.5469 " fill="#FBFB77" filter="url(#f1a1d0lnml9sde)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M204,895.5469 L204,905.5469 L214,905.5469 L204,895.5469 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="11" y="912.6138">Construct AnchorEvent with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="11" y="927.7466">proofs from Domain1 and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="11" y="942.8794">Domain2 and post to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="11" y="958.0122">anchor_event queue, which</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="11" y="973.145">is consumed by Batch Writer.</text><polygon fill="#A80036" points="239,1007.3438,229,1011.3438,239,1015.3438,235,1011.3438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="233" x2="412" y1="1011.3438" y2="1011.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="245" y="1006.2778">ACK</text><!--MD5=[3eefd329d726369e79751758b98b1e02]
@startuml
'https://plantuml.com/sequence-diagram

'autonumber

box Domain1 #White
participant Domain1
queue anchor_event
end box

box Domain2
participant Domain2
participant VCT2
end box

box Domain3 #White
participant Domain3
participant VCT3
end box

activate Domain1
Domain1 -> Domain2: Offer activity

activate Domain2

Domain2 -> Domain2: Authenticate\nDomain1\nusing HTTP signature
Domain2 - -> Domain1: OK
Domain2 -> Domain2: Authorize\nDomain1

note left
Authorization successful
since Domain1 is in the
witnessing list.
end note

Domain1 -> Domain3: Offer activity

activate Domain3

Domain3 -> Domain3: Authenticate\nDomain1\nusing HTTP signature

Domain3 - -> Domain1: OK

deactivate Domain1

Domain2 -> VCT2: Add VCT
activate VCT2
VCT2 - -> Domain2: OK
deactivate VCT2
Domain2 -> Domain1: Accept activity

activate Domain1
Domain1 -> Domain1: Authenticate\nDomain2\nusing HTTP signature

Domain1 - -> Domain2: OK

deactivate Domain2


Domain1 -> Domain1: Add proof from Domain3\nand check Witness Policy
note left
We don't have enough
proofs (according to
Witness Policy).
end note

deactivate Domain1

Domain3 -> Domain3: Authorize\nDomain1

note left
Authorization successful since
Domain1 is in the witnessing list.
end note

Domain3 -> VCT3: Add to VCT
activate VCT3
VCT3 - -> Domain3: OK
deactivate VCT3
Domain3 -> Domain1: Accept activity

activate Domain1

Domain1 - -> Domain3: OK

deactivate Domain3

Domain1 -> Domain1: Add proof from Domain3\nand check Witness Policy

note left
We have enough proofs
according Witness Policy.
end note

Domain1 -> anchor_event: AnchorEvent message
note left
Construct AnchorEvent with
proofs from Domain1 and
Domain2 and post to
anchor_event queue, which
is consumed by Batch Writer.
end note

anchor_event - -> Domain1: ACK

deactivate Domain1
@enduml

@startuml


box Domain1 #White
participant Domain1
queue anchor_event
end box

box Domain2
participant Domain2
participant VCT2
end box

box Domain3 #White
participant Domain3
participant VCT3
end box

activate Domain1
Domain1 -> Domain2: Offer activity

activate Domain2

Domain2 -> Domain2: Authenticate\nDomain1\nusing HTTP signature
Domain2 - -> Domain1: OK
Domain2 -> Domain2: Authorize\nDomain1

note left
Authorization successful
since Domain1 is in the
witnessing list.
end note

Domain1 -> Domain3: Offer activity

activate Domain3

Domain3 -> Domain3: Authenticate\nDomain1\nusing HTTP signature

Domain3 - -> Domain1: OK

deactivate Domain1

Domain2 -> VCT2: Add VCT
activate VCT2
VCT2 - -> Domain2: OK
deactivate VCT2
Domain2 -> Domain1: Accept activity

activate Domain1
Domain1 -> Domain1: Authenticate\nDomain2\nusing HTTP signature

Domain1 - -> Domain2: OK

deactivate Domain2


Domain1 -> Domain1: Add proof from Domain3\nand check Witness Policy
note left
We don't have enough
proofs (according to
Witness Policy).
end note

deactivate Domain1

Domain3 -> Domain3: Authorize\nDomain1

note left
Authorization successful since
Domain1 is in the witnessing list.
end note

Domain3 -> VCT3: Add to VCT
activate VCT3
VCT3 - -> Domain3: OK
deactivate VCT3
Domain3 -> Domain1: Accept activity

activate Domain1

Domain1 - -> Domain3: OK

deactivate Domain3

Domain1 -> Domain1: Add proof from Domain3\nand check Witness Policy

note left
We have enough proofs
according Witness Policy.
end note

Domain1 -> anchor_event: AnchorEvent message
note left
Construct AnchorEvent with
proofs from Domain1 and
Domain2 and post to
anchor_event queue, which
is consumed by Batch Writer.
end note

anchor_event - -> Domain1: ACK

deactivate Domain1
@enduml

PlantUML version 1.2022.1beta3(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>