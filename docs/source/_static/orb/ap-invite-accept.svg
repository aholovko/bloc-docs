<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="742px" preserveAspectRatio="none" style="width:710px;height:742px;" version="1.1" viewBox="0 0 710 742" width="710px" zoomAndPan="magnify"><defs><style type="text/css"><![CDATA[*.s_181818_e7e7e7 {stroke:#181818;}*.f_000000_ffffff {fill:#000000;}*.f_dddddd_222222 {fill:#dddddd;}*.f_ffffff_000000 {fill:#ffffff;}*.f_181818_e7e7e7 {fill:#181818;}*.f_feffdd_333333 {fill:#feffdd;}@media (prefers-color-scheme:dark) {*.s_181818_e7e7e7 {stroke:#e7e7e7;}*.f_000000_ffffff {fill:#ffffff;}*.f_dddddd_222222 {fill:#222222;}*.f_ffffff_000000 {fill:#000000;}*.f_181818_e7e7e7 {fill:#e7e7e7;}*.f_feffdd_333333 {fill:#333333;}}]]></style></defs><g><rect class="s_181818_e7e7e7" fill="#FFFFFF" height="730.3828" style="stroke-width:0.5;" width="441.5" x="1" y="6"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="66" x="186.25" y="18.0669">Domain1</text><rect class="f_dddddd_222222 s_181818_e7e7e7" height="730.3828" style="stroke-width:0.5;" width="259.5" x="444.5" y="6"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="66" x="541.25" y="18.0669">Domain2</text><rect class="f_ffffff_000000 s_181818_e7e7e7" height="201.9297" style="stroke-width:1.0;" width="10" x="165" y="132.5625"/><rect class="f_ffffff_000000 s_181818_e7e7e7" height="180.9297" style="stroke-width:1.0;" width="10" x="165" y="458.1563"/><rect class="f_ffffff_000000 s_181818_e7e7e7" height="210.0625" style="stroke-width:1.0;" width="10" x="482" y="248.0938"/><line class="s_181818_e7e7e7" style="stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="63" x2="63" y1="101.4297" y2="657.0859"/><line class="s_181818_e7e7e7" style="stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="170" x2="170" y1="101.4297" y2="657.0859"/><line class="s_181818_e7e7e7" style="stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="392.5" x2="392.5" y1="101.4297" y2="657.0859"/><line class="s_181818_e7e7e7" style="stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="486.5" x2="486.5" y1="101.4297" y2="657.0859"/><line class="s_181818_e7e7e7" style="stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="655" x2="655" y1="101.4297" y2="657.0859"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="5" y="98.1279">Domain1Admin</text><ellipse class="s_181818_e7e7e7" cx="63" cy="33.6328" fill="#E2E2F0" rx="8" ry="8" style="stroke-width:0.5;"/><path class="s_181818_e7e7e7" d="M63,41.6328 L63,68.6328 M50,49.6328 L76,49.6328 M63,68.6328 L50,83.6328 M63,68.6328 L76,83.6328 " fill="none" style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="5" y="669.0811">Domain1Admin</text><ellipse class="s_181818_e7e7e7" cx="63" cy="680.8828" fill="#E2E2F0" rx="8" ry="8" style="stroke-width:0.5;"/><path class="s_181818_e7e7e7" d="M63,688.8828 L63,715.8828 M50,696.8828 L76,696.8828 M63,715.8828 L50,730.8828 M63,715.8828 L76,730.8828 " fill="none" style="stroke-width:0.5;"/><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="78" x="131" y="70.1328"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="138" y="90.1279">Domain1</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="78" x="131" y="656.0859"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="138" y="676.0811">Domain1</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="347.5" y="98.1279">Domain1DB</text><path class="s_181818_e7e7e7" d="M375,49.1328 C375,39.1328 393,39.1328 393,39.1328 C393,39.1328 411,39.1328 411,49.1328 L411,75.1328 C411,85.1328 393,85.1328 393,85.1328 C393,85.1328 375,85.1328 375,75.1328 L375,49.1328 " fill="#E2E2F0" style="stroke-width:1.5;"/><path class="s_181818_e7e7e7" d="M375,49.1328 C375,59.1328 393,59.1328 393,59.1328 C393,59.1328 411,59.1328 411,49.1328 " fill="none" style="stroke-width:1.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="347.5" y="669.0811">Domain1DB</text><path class="s_181818_e7e7e7" d="M375,682.3828 C375,672.3828 393,672.3828 393,672.3828 C393,672.3828 411,672.3828 411,682.3828 L411,708.3828 C411,718.3828 393,718.3828 393,718.3828 C393,718.3828 375,718.3828 375,708.3828 L375,682.3828 " fill="#E2E2F0" style="stroke-width:1.5;"/><path class="s_181818_e7e7e7" d="M375,682.3828 C375,692.3828 393,692.3828 393,692.3828 C393,692.3828 411,692.3828 411,682.3828 " fill="none" style="stroke-width:1.5;"/><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="77" x="448.5" y="70.1328"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="455.5" y="90.1279">Domain2</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="77" x="448.5" y="656.0859"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="455.5" y="676.0811">Domain2</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="610" y="98.1279">Domain2DB</text><path class="s_181818_e7e7e7" d="M637,49.1328 C637,39.1328 655,39.1328 655,39.1328 C655,39.1328 673,39.1328 673,49.1328 L673,75.1328 C673,85.1328 655,85.1328 655,85.1328 C655,85.1328 637,85.1328 637,75.1328 L637,49.1328 " fill="#E2E2F0" style="stroke-width:1.5;"/><path class="s_181818_e7e7e7" d="M637,49.1328 C637,59.1328 655,59.1328 655,59.1328 C655,59.1328 673,59.1328 673,49.1328 " fill="none" style="stroke-width:1.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="610" y="669.0811">Domain2DB</text><path class="s_181818_e7e7e7" d="M637,682.3828 C637,672.3828 655,672.3828 655,672.3828 C655,672.3828 673,672.3828 673,682.3828 L673,708.3828 C673,718.3828 655,718.3828 655,718.3828 C655,718.3828 637,718.3828 637,708.3828 L637,682.3828 " fill="#E2E2F0" style="stroke-width:1.5;"/><path class="s_181818_e7e7e7" d="M637,682.3828 C637,692.3828 655,692.3828 655,692.3828 C655,692.3828 673,692.3828 673,682.3828 " fill="none" style="stroke-width:1.5;"/><rect class="f_ffffff_000000 s_181818_e7e7e7" height="201.9297" style="stroke-width:1.0;" width="10" x="165" y="132.5625"/><rect class="f_ffffff_000000 s_181818_e7e7e7" height="180.9297" style="stroke-width:1.0;" width="10" x="165" y="458.1563"/><rect class="f_ffffff_000000 s_181818_e7e7e7" height="210.0625" style="stroke-width:1.0;" width="10" x="482" y="248.0938"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="153,128.5625,163,132.5625,153,136.5625,157,132.5625" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="63" x2="159" y1="132.5625" y2="132.5625"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="70" y="127.4966">Post Invite</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="175" x2="217" y1="176.8281" y2="176.8281"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="217" x2="217" y1="176.8281" y2="189.8281"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="176" x2="217" y1="189.8281" y2="189.8281"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="186,185.8281,176,189.8281,186,193.8281,182,189.8281" style="stroke-width:1.0;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="182" y="156.6294">Authenticate Domain1Admin</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="182" y="171.7622">using bearer token</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="74,214.9609,64,218.9609,74,222.9609,70,218.9609" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="68" x2="164" y1="218.9609" y2="218.9609"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="80" y="213.895">OK</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="470,244.0938,480,248.0938,470,252.0938,474,248.0938" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="175" x2="476" y1="248.0938" y2="248.0938"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="182" y="243.0278">Invite activity</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="492" x2="534" y1="292.3594" y2="292.3594"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="534" x2="534" y1="292.3594" y2="305.3594"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="493" x2="534" y1="305.3594" y2="305.3594"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="503,301.3594,493,305.3594,503,309.3594,499,305.3594" style="stroke-width:1.0;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="499" y="272.1606">Authenticate Domain1</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="499" y="287.2935">using HTTP signature</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="181,330.4922,171,334.4922,181,338.4922,177,334.4922" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="175" x2="481" y1="334.4922" y2="334.4922"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="187" y="329.4263">OK</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="492" x2="534" y1="367.6914" y2="367.6914"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="534" x2="534" y1="367.6914" y2="380.6914"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="493" x2="534" y1="380.6914" y2="380.6914"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="503,376.6914,493,380.6914,503,384.6914,499,380.6914" style="stroke-width:1.0;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="499" y="362.6255">Authorize Domain1</text><path class="f_feffdd_333333 s_181818_e7e7e7" d="M232,347.4922 L232,387.4922 L477,387.4922 L477,357.4922 L467,347.4922 L232,347.4922 " style="stroke-width:0.5;"/><path class="f_feffdd_333333 s_181818_e7e7e7" d="M467,347.4922 L467,357.4922 L477,357.4922 L467,347.4922 " style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="238" y="364.5591">Authorization successful using</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224" x="238" y="379.6919">Invite Witness Authorization Policy.</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="643,425.0234,653,429.0234,643,433.0234,647,429.0234" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="492" x2="649" y1="429.0234" y2="429.0234"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="499" y="408.8247">Add Domain1 to</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="499" y="423.9575">witnessing list</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="186,454.1563,176,458.1563,186,462.1563,182,458.1563" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="180" x2="486" y1="458.1563" y2="458.1563"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="192" y="453.0903">Accept activity</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="175" x2="217" y1="502.4219" y2="502.4219"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="217" x2="217" y1="502.4219" y2="515.4219"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="176" x2="217" y1="515.4219" y2="515.4219"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="186,511.4219,176,515.4219,186,519.4219,182,515.4219" style="stroke-width:1.0;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="182" y="482.2231">Authenticate Domain2</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="182" y="497.356">using HTTP signature</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="475,540.5547,485,544.5547,475,548.5547,479,544.5547" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="175" x2="481" y1="544.5547" y2="544.5547"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="182" y="539.4888">OK</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="175" x2="217" y1="585.3203" y2="585.3203"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="217" x2="217" y1="585.3203" y2="598.3203"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="176" x2="217" y1="598.3203" y2="598.3203"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="186,594.3203,176,598.3203,186,602.3203,182,598.3203" style="stroke-width:1.0;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="182" y="580.2544">Validate Accept activity</text><path class="f_feffdd_333333 s_181818_e7e7e7" d="M345,557.5547 L345,612.5547 L586,612.5547 L586,567.5547 L576,557.5547 L345,557.5547 " style="stroke-width:0.5;"/><path class="f_feffdd_333333 s_181818_e7e7e7" d="M576,557.5547 L576,567.5547 L586,567.5547 L576,557.5547 " style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="351" y="574.6216">Validate the Invite activity</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="351" y="589.7544">embedded in the Accept activity</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="351" y="604.8872">against a previously posted Invite.</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="381,635.0859,391,639.0859,381,643.0859,385,639.0859" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="170" x2="387" y1="639.0859" y2="639.0859"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="177" y="634.02">Add Domain2 to witnesses list</text><!--MD5=[19a93014824fb7bfa44208abb8706f53]
@startuml
'https://plantuml.com/sequence-diagram

'autonumber

box Domain1 #White
actor Domain1Admin
participant Domain1
database Domain1DB
end box

box Domain2
participant Domain2
database Domain2DB
end box

Domain1Admin -> Domain1: Post Invite

activate Domain1

Domain1 -> Domain1: Authenticate Domain1Admin\nusing bearer token

Domain1 - -> Domain1Admin: OK

Domain1 -> Domain2: Invite activity

activate Domain2

Domain2 -> Domain2: Authenticate Domain1\nusing HTTP signature
Domain2 - -> Domain1: OK

deactivate Domain1

Domain2 -> Domain2: Authorize Domain1

note left
Authorization successful using
Invite Witness Authorization Policy.
end note

Domain2 -> Domain2DB: Add Domain1 to\nwitnessing list
Domain2 -> Domain1: Accept activity

deactivate Domain2

activate Domain1

Domain1 -> Domain1: Authenticate Domain2\nusing HTTP signature
Domain1 - -> Domain2: OK
Domain1 -> Domain1: Validate Accept activity

note right
Validate the Invite activity
embedded in the Accept activity
against a previously posted Invite.
end note

Domain1 -> Domain1DB: Add Domain2 to witnesses list

deactivate Domain1
@enduml

@startuml


box Domain1 #White
actor Domain1Admin
participant Domain1
database Domain1DB
end box

box Domain2
participant Domain2
database Domain2DB
end box

Domain1Admin -> Domain1: Post Invite

activate Domain1

Domain1 -> Domain1: Authenticate Domain1Admin\nusing bearer token

Domain1 - -> Domain1Admin: OK

Domain1 -> Domain2: Invite activity

activate Domain2

Domain2 -> Domain2: Authenticate Domain1\nusing HTTP signature
Domain2 - -> Domain1: OK

deactivate Domain1

Domain2 -> Domain2: Authorize Domain1

note left
Authorization successful using
Invite Witness Authorization Policy.
end note

Domain2 -> Domain2DB: Add Domain1 to\nwitnessing list
Domain2 -> Domain1: Accept activity

deactivate Domain2

activate Domain1

Domain1 -> Domain1: Authenticate Domain2\nusing HTTP signature
Domain1 - -> Domain2: OK
Domain1 -> Domain1: Validate Accept activity

note right
Validate the Invite activity
embedded in the Accept activity
against a previously posted Invite.
end note

Domain1 -> Domain1DB: Add Domain2 to witnesses list

deactivate Domain1
@enduml

PlantUML version 1.2022.2beta5(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>